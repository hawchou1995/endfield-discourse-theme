// ============================================
// 5. 侧边栏深度优化 (针对 .menu-panel 修复版)
// ============================================

// 移动端侧边栏的根容器是 .menu-panel
.menu-panel {
  
  // ------------------------------------------------------------
  // 发帖按钮样式重构
  // ------------------------------------------------------------
  
  // 1. 按钮容器：给予呼吸空间
  .endfield-sidebar-new-topic-button-container {
    padding: 15px 10px 5px 10px !important; // 上方多留白
    width: 100% !important;
    box-sizing: border-box !important;
    display: flex !important;
    justify-content: center !important;
    margin-bottom: 10px !important; // 把下方的列表顶下去
  }

  // 2. 按钮本体：强制全宽 + 橙色风格
  .endfield-sidebar-create-btn {
    width: 100% !important;
    height: 48px !important;
    padding: 0 !important; // 移除默认 padding
    
    // 强制橙色背景
    background: var(--quaternary) !important;
    color: #fff !important;
    
    // 形状处理：去圆角 + 切角
    border-radius: 0 !important;
    clip-path: polygon(
      0 0, 
      100% 0, 
      100% calc(100% - 10px), 
      calc(100% - 10px) 100%, 
      0 100%
    );
    
    // 阴影与边框
    border: none !important;
    box-shadow: 0 4px 0 rgba(0,0,0,0.2) !important;
    
    // 布局：强制让内容显示（对抗 .no-text 类）
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;

    // [关键] 强制显示内部文字！
    // 因为 HTML 里有 .no-text 类，默认会把 span 隐藏，这里必须救回来
    .d-button-label {
      display: inline-block !important;
      font-size: 1.1em !important;
      font-weight: 800 !important;
      color: #fff !important;
      margin-left: 8px !important; // 图标和文字间距
      line-height: 1 !important;
    }

    // 图标样式
    .d-icon {
      margin: 0 !important;
      font-size: 1.1em !important;
      color: #fff !important;
    }
    
    // 装饰角标（如果有的话，稍微调整一下）
    .btn-decor-corner {
      display: none; // 移动端空间小，切角够用了，隐藏额外的装饰元素以防布局错乱
    }

    // 交互态
    &:active {
      transform: translateY(2px);
      box-shadow: 0 2px 0 rgba(0,0,0,0.2) !important;
    }
  }

  // ------------------------------------------------------------
  // 侧边栏菜单项优化
  // ------------------------------------------------------------
  .sidebar-section-link-wrapper .sidebar-section-link {
    border-radius: 0 !important;
    
    &.active {
      background: var(--primary-very-low);
      border-left: 3px solid var(--tertiary); // 青色高亮条
      font-weight: bold;
    }
    
    // 增加一点高度，方便点击
    padding-top: 10px !important;
    padding-bottom: 10px !important;
  }
}

// 6. 其他微调
// ------------------------------------------------------------
// 稍微调整底部区域，防止被切角遮挡
.sidebar-footer-wrapper {
  border-top: 1px solid var(--primary-low);
}
